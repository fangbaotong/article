<html><head><meta http-equiv='Content-Type' content='text/html; charset=UTF-8'><title>php解决与处理网站高并发 大流量访问的方法</title>
<style>
body{
	width:960px;
	margin:0 auto;
}
#title{
	text-align:center;
}
</style>
</head><body><div id='title'><h2>php解决与处理网站高并发 大流量访问的方法</h2></div><div id="art_demo">
	普通的P4服务器一般最多能支持每天10万独立IP，如果访问量比这个还要大，那么必须首先配置一台更高性能的专用服务器才能解决问题
</div>
<div id="con_all">
</div>
首先，确认服务器硬件是否足够支持当前的流量。 <br />
<br />
普通的P4服务器一般最多能支持每天10万独立IP，如果访问量比这个还要大， <br />
那么必须首先配置一台更高性能的专用服务器才能解决问题 <br />
<br />
，否则怎么优化都不可能彻底解决性能问题。 <br />
<br />
其次，优化数据库访问。 <br />
<br />
前台实现完全的静态化当然最好，可以完全不用访问数据库，不过对于频繁更新的网站， <br />
静态化往往不能满足某些功能。 <br />
<br />
缓存技术就是另一个解决方案，就是将动态数据存储到缓存文件中，动态网页直接调用 <br />
这些文件，而不必再访问数据库，WordPress和Z-Blog都大量使用这种缓存技术。我 <br />
自己也写过一个Z-Blog的计数器插件，也是基于这样的原理。 <br />
<br />
如果确实无法避免对数据库的访问，那么可以尝试优化数据库的查询SQL.避免使用 <br />
Select * from这样的语句，每次查询只返回自己需要的结果，避免短时间内的大 <br />
量SQL查询。 <br />
<br />
第三，禁止外部的盗链。 <br />
<br />
外部网站的图片或者文件盗链往往会带来大量的负载压力，因此应该严格限制外部对 <br />
于自身的图片或者文件盗链，好在目前可以简单地通过refer来控制盗链，Apache自 <br />
己就可以通过配置来禁止盗链，IIS也有一些第三方的ISAPI可以实现同样的功能。当 <br />
然，伪造refer也可以通过代码来实现盗链，不过目前蓄意伪造refer盗链的还不多， <br />
可以先不去考虑，或者使用非技术手段来解决，比如在图片上增加水印。 <br />
<br />
第四，控制大文件的下载。 <br />
<br />
大文件的下载会占用很大的流量，并且对于非SCSI硬盘来说，大量文件下载会消耗 <br />
CPU，使得网站响应能力下降。因此，尽量不要提供超过2M的大文件下载，如果需要 <br />
提供，建议将大文件放在另外一台服务器上。 <br />
<br />
第五，使用不同主机分流主要流量 <br />
<br />
将文件放在不同的主机上，提供不同的镜像供用户下载。比如如果觉得RSS文件占用 <br />
流量大，那么使用FeedBurner或者FeedSky等服务将RSS输出放在其他主机上，这 <br />
样别人访问的流量压力就大多集中在FeedBurner的主机上，RSS就不占用太多资源了。 <br />
<br />
第六，使用流量分析统计软件。 <br />
<br />
在网站上安装一个流量分析统计软件，可以即时知道哪些地方耗费了大量流量，哪些页 <br />
面需要再进行优化，因此，解决流量问题还需要进行精确的统计分析才可以。我推荐使 <br />
用的流量分析统计软件是Google Analytics（Google分析）。我使用过程中感觉其 <br />
效果非常不错，稍后我将详细介绍一下Google Analytics的一些使用常识和技巧。</body></html>